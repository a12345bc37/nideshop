{
    "version": 3,
    "sources": [
        "../../../src/admin/controller/topic.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "indexAction",
        "page",
        "get",
        "size",
        "name",
        "model",
        "data",
        "where",
        "title",
        "order",
        "countSelect",
        "success",
        "countAction",
        "count",
        "categoryByIdAction",
        "id",
        "find",
        "categoryAction",
        "infoAction",
        "storeCategoryAction",
        "isPost",
        "values",
        "post",
        "console",
        "log",
        "update",
        "add",
        "storeAction",
        "is_show",
        "is_new",
        "destoryAction",
        "limit",
        "delete"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;;AAEAC,OAAOC,OAAP,GAAiB,cAAcH,IAAd,CAAmB;AAChC;;;;AAIMI,eAAN,GAAoB;AAAA;;AAAA;AAChB,kBAAMC,OAAO,MAAKC,GAAL,CAAS,MAAT,KAAoB,CAAjC;AACA,kBAAMC,OAAO,MAAKD,GAAL,CAAS,MAAT,KAAoB,EAAjC;AACA,kBAAME,OAAO,MAAKF,GAAL,CAAS,MAAT,KAAoB,EAAjC;;AAEA,kBAAMG,QAAQ,MAAKA,KAAL,CAAW,OAAX,CAAd;AACA,kBAAMC,OAAO,MAAMD,MAAME,KAAN,CAAY,EAAEC,OAAO,CAAC,MAAD,EAAU,IAAGJ,IAAK,GAAlB,CAAT,EAAZ,EAA8CK,KAA9C,CAAoD,CAAC,SAAD,CAApD,EAAiER,IAAjE,CAAsEA,IAAtE,EAA4EE,IAA5E,EAAkFO,WAAlF,EAAnB;;AAEA,mBAAO,MAAKC,OAAL,CAAaL,IAAb,CAAP;AARgB;AASnB;AACKM,eAAN,GAAoB;AAAA;;AAAA;AAChB,kBAAMP,QAAQ,OAAKA,KAAL,CAAW,OAAX,CAAd;AACA,kBAAMC,OAAO,MAAMD,MAAMK,WAAN,EAAnB;;AAEA,mBAAO,OAAKC,OAAL,CAAaL,KAAKO,KAAlB,CAAP;AAJgB;AAKnB;AACKC,sBAAN,GAA2B;AAAA;;AAAA;AACvB,kBAAMC,KAAK,OAAKb,GAAL,CAAS,IAAT,CAAX;AACA,kBAAMG,QAAQ,OAAKA,KAAL,CAAW,OAAX,CAAd;AACA,kBAAMC,OAAO,MAAMD,MAAME,KAAN,CAAY,EAAEQ,IAAIA,EAAN,EAAZ,EAAwBC,IAAxB,EAAnB;;AAEA,mBAAO,OAAKL,OAAL,CAAaL,IAAb,CAAP;AALuB;AAM1B;AACKW,kBAAN,GAAuB;AAAA;;AAAA;AACnB,kBAAMZ,QAAQ,OAAKA,KAAL,CAAW,gBAAX,CAAd;AACA,kBAAMC,OAAO,MAAMD,MAAMK,WAAN,EAAnB;;AAEA,mBAAO,OAAKC,OAAL,CAAaL,IAAb,CAAP;AAJmB;AAKtB;AACKY,cAAN,GAAmB;AAAA;;AAAA;AACf,kBAAMH,KAAK,OAAKb,GAAL,CAAS,IAAT,CAAX;AACA,kBAAMG,QAAQ,OAAKA,KAAL,CAAW,OAAX,CAAd;AACA,kBAAMC,OAAO,MAAMD,MAAME,KAAN,CAAY,EAAEQ,IAAIA,EAAN,EAAZ,EAAwBC,IAAxB,EAAnB;;AAEA,mBAAO,OAAKL,OAAL,CAAaL,IAAb,CAAP;AALe;AAMlB;;AAEKa,uBAAN,GAA4B;AAAA;;AAAA;AACxB,gBAAI,CAAC,OAAKC,MAAV,EAAkB;AACd,uBAAO,KAAP;AACH;;AAED,kBAAMC,SAAS,OAAKC,IAAL,EAAf;AACAC,oBAAQC,GAAR,CAAYH,MAAZ;AACA,kBAAMN,KAAK,OAAKO,IAAL,CAAU,IAAV,CAAX;;AAEA,kBAAMjB,QAAQ,OAAKA,KAAL,CAAW,gBAAX,CAAd;;AAEA,gBAAIU,KAAK,CAAT,EAAY;AACR,sBAAMV,MAAME,KAAN,CAAY,EAAEQ,IAAIA,EAAN,EAAZ,EAAwBU,MAAxB,CAA+BJ,MAA/B,CAAN;AACH,aAFD,MAEO;AACH,uBAAOA,OAAON,EAAd;AACA,sBAAMV,MAAMqB,GAAN,CAAUL,MAAV,CAAN;AACH;AACD,mBAAO,OAAKV,OAAL,CAAaU,MAAb,CAAP;AAjBwB;AAkB3B;;AAEKM,eAAN,GAAoB;AAAA;;AAAA;AAChB,gBAAI,CAAC,OAAKP,MAAV,EAAkB;AACd,uBAAO,KAAP;AACH;;AAED,kBAAMC,SAAS,OAAKC,IAAL,EAAf;AACA,kBAAMP,KAAK,OAAKO,IAAL,CAAU,IAAV,CAAX;;AAEA,kBAAMjB,QAAQ,OAAKA,KAAL,CAAW,OAAX,CAAd;AACAgB,mBAAOO,OAAP,GAAiBP,OAAOO,OAAP,GAAiB,CAAjB,GAAqB,CAAtC;AACAP,mBAAOQ,MAAP,GAAgBR,OAAOQ,MAAP,GAAgB,CAAhB,GAAoB,CAApC;AACA,gBAAId,KAAK,CAAT,EAAY;AACR,sBAAMV,MAAME,KAAN,CAAY,EAAEQ,IAAIA,EAAN,EAAZ,EAAwBU,MAAxB,CAA+BJ,MAA/B,CAAN;AACH,aAFD,MAEO;AACH,uBAAOA,OAAON,EAAd;AACA,sBAAMV,MAAMqB,GAAN,CAAUL,MAAV,CAAN;AACH;AACD,mBAAO,OAAKV,OAAL,CAAaU,MAAb,CAAP;AAjBgB;AAkBnB;;AAEKS,iBAAN,GAAsB;AAAA;;AAAA;AAClB,kBAAMf,KAAK,OAAKb,GAAL,CAAS,IAAT,CAAX;AACA,kBAAM,OAAKG,KAAL,CAAW,OAAX,EAAoBE,KAApB,CAA0B,EAAEQ,IAAIA,EAAN,EAA1B,EAAsCgB,KAAtC,CAA4C,CAA5C,EAA+CC,MAA/C,EAAN;AACA;;AAEA,mBAAO,OAAKrB,OAAL,EAAP;AALkB;AAMrB;AAxF+B,CAApC",
    "file": "../../../src/admin/controller/topic.js",
    "sourcesContent": [
        "const Base = require('./base.js');\n\nmodule.exports = class extends Base {\n    /**\n     * index action\n     * @return {Promise} []\n     */\n    async indexAction() {\n        const page = this.get('page') || 1;\n        const size = this.get('size') || 10;\n        const name = this.get('name') || '';\n\n        const model = this.model('topic');\n        const data = await model.where({ title: ['like', `%${name}%`] }).order(['id DESC']).page(page, size).countSelect();\n\n        return this.success(data);\n    }\n    async countAction() {\n        const model = this.model('topic');\n        const data = await model.countSelect();\n\n        return this.success(data.count);\n    }\n    async categoryByIdAction() {\n        const id = this.get('id');\n        const model = this.model('topic');\n        const data = await model.where({ id: id }).find();\n\n        return this.success(data);\n    }\n    async categoryAction() {\n        const model = this.model('topic_category');\n        const data = await model.countSelect();\n\n        return this.success(data);\n    }\n    async infoAction() {\n        const id = this.get('id');\n        const model = this.model('topic');\n        const data = await model.where({ id: id }).find();\n\n        return this.success(data);\n    }\n\n    async storeCategoryAction() {\n        if (!this.isPost) {\n            return false;\n        }\n\n        const values = this.post();\n        console.log(values);\n        const id = this.post('id');\n\n        const model = this.model('topic_category');\n\n        if (id > 0) {\n            await model.where({ id: id }).update(values);\n        } else {\n            delete values.id;\n            await model.add(values);\n        }\n        return this.success(values);\n    }\n\n    async storeAction() {\n        if (!this.isPost) {\n            return false;\n        }\n\n        const values = this.post();\n        const id = this.post('id');\n\n        const model = this.model('topic');\n        values.is_show = values.is_show ? 1 : 0;\n        values.is_new = values.is_new ? 1 : 0;\n        if (id > 0) {\n            await model.where({ id: id }).update(values);\n        } else {\n            delete values.id;\n            await model.add(values);\n        }\n        return this.success(values);\n    }\n\n    async destoryAction() {\n        const id = this.get('id');\n        await this.model('topic').where({ id: id }).limit(1).delete();\n        // TODO 删除图片\n\n        return this.success();\n    }\n};"
    ]
}